# 工作记录管理后台

## 📋 系统概述

这是一个基于H5的工作记录管理后台系统，用于管理微信小程序的用户数据、工作记录和系统统计。

## 🚀 功能特性

### 📊 数据概览
- 实时统计总用户数、总记录数、平均成功率、活跃用户数
- 用户增长趋势图表（最近30天）
- 工作记录统计图表（最近7天）
- 最近活动动态展示

### 👥 用户管理
- 用户列表查看和搜索
- 用户详细信息展示
- 用户记录统计
- 用户管理操作

### 📋 工作记录管理
- 工作记录列表展示
- 按日期和用户筛选
- 记录详情查看
- 成功率统计分析

### 📈 数据分析
- 成功率趋势分析
- 用户活跃度分析
- 数据分布统计
- 部门统计图表

### 📤 数据导出
- 支持多种数据类型导出
- Excel、CSV、JSON格式支持
- 自定义时间范围导出
- 导出历史记录

### ⚙️ 系统设置
- 系统参数配置
- 数据保留策略
- 自动备份设置

## 🛠️ 技术架构

### 前端技术
- **HTML5 + CSS3**：现代化响应式界面
- **JavaScript ES6+**：原生JavaScript开发
- **Chart.js**：数据可视化图表
- **CSS Grid + Flexbox**：灵活布局系统

### 后端集成
- **微信云开发**：数据存储和云函数
- **云函数API**：数据获取和处理
- **实时数据同步**：与小程序数据同步

## 📁 文件结构

```
admin/
├── index.html          # 主页面
├── login.html          # 登录页面
├── css/
│   └── admin.css       # 样式文件
├── js/
│   └── admin.js        # 主要逻辑
└── README.md           # 说明文档
```

## 🔧 部署说明

### 1. 云函数部署
```bash
# 进入云函数目录
cd cloudfunctions/getAdminStats

# 安装依赖
npm install

# 部署到微信云开发
# 在微信开发者工具中右键点击云函数文件夹，选择"上传并部署"
```

### 2. H5页面部署
```bash
# 将admin文件夹上传到Web服务器
# 或者使用微信云开发的静态网站托管功能

# 访问地址示例：
# https://your-domain.com/admin/login.html
```

### 3. 权限配置
- 在微信云开发控制台配置数据库权限
- 设置云函数访问权限
- 配置静态网站托管域名

## 🔐 登录信息

### 演示账号
- **用户名**：admin
- **密码**：123456

### 生产环境
建议修改 `login.html` 中的验证逻辑，集成真实的用户认证系统。

## 📱 使用方法

### 1. 访问后台
1. 打开浏览器访问 `login.html`
2. 输入用户名和密码登录
3. 进入管理后台主界面

### 2. 数据查看
1. **数据概览**：查看系统整体统计
2. **用户管理**：管理用户信息
3. **工作记录**：查看和管理工作记录
4. **数据分析**：查看详细分析报告

### 3. 数据导出
1. 进入"数据导出"页面
2. 选择导出类型和时间范围
3. 选择导出格式
4. 点击"导出数据"按钮

## 🔄 数据同步

### 实时数据
- 系统会实时从微信云开发获取最新数据
- 支持手动刷新和自动更新
- 数据缓存机制提升加载速度

### 数据源
- **用户数据**：从 `users` 集合获取
- **工作记录**：从 `work_reports` 集合获取
- **统计数据**：通过云函数实时计算

## 📊 图表说明

### 用户增长趋势
- 显示最近30天的用户注册趋势
- 支持按日期查看详细数据

### 工作记录统计
- 显示最近7天的记录提交情况
- 区分总记录数和成功记录数

### 成功率分析
- 计算和展示平均成功率
- 支持时间范围筛选

## 🛡️ 安全考虑

### 访问控制
- 登录验证机制
- 会话管理
- 权限分级（可扩展）

### 数据安全
- 云函数权限控制
- 数据库访问限制
- 敏感信息脱敏

## 🔧 自定义配置

### 修改登录验证
编辑 `login.html` 中的验证逻辑：
```javascript
// 替换简单验证为真实认证
if (username === 'admin' && password === '123456') {
    // 改为调用真实的认证API
}
```

### 修改数据源
编辑 `admin.js` 中的数据获取逻辑：
```javascript
// 修改云函数调用
const result = await wx.cloud.callFunction({
    name: 'your-custom-function',
    data: { /* 自定义参数 */ }
});
```

### 自定义样式
编辑 `admin.css` 文件来修改界面样式：
```css
/* 修改主题色 */
:root {
    --primary-color: #your-color;
    --secondary-color: #your-color;
}
```

## 📞 技术支持

如有问题或需要技术支持，请联系开发团队。

## 📄 更新日志

### v1.0.0 (2024-07-11)
- 初始版本发布
- 基础功能实现
- 数据可视化图表
- 用户和记录管理
- 数据导出功能
